<div>
  <div class="container">
    <section>

      <div class="heading heading-sm text-uppercase">
        <a href="dashboard.html">EVENTOS</a> / <a href="list-view.html">RODRIGO DP & KNOWBRUo <small class="text-info">09/06/2018</small> / </a> Invitados
      </div>

      <div class="row ">

        <div class="col-12- col-md-4">
          <div class="heading heading-sm text-uppercase border-bottom">
            Buscar personas
          </div>
          <form >
            <div class="input-group mb-4">
              <input type="text" class="form-control" placeholder="Ingrese el Nombre o DNI" aria-label="Recipient's username" aria-describedby="basic-addon2">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" id="search">Buscar</button>
              </div>
            </div>
          </form>

          <div class="mb-4" id="spinner">
            <i class="fas fa-spinner fa-spin"></i>
          </div>

          <div class="card mb-4" id="people">
            <div class="card-body p-0">
              <div class="card-header">
                Datos de la persona
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">Nombre: <span class="font-weight-bold text-info">Juan Pérez</span> </li>
                <li class="list-group-item">DNI: <span class="font-weight-bold text-info">123456789</span> </li>
                <li class="list-group-item">Email: <span class="font-weight-bold text-info">jperez@mail.com</span> </li>
              </ul>
            </div>
          </div>

          <button type="button" name="button" class="btn btn-lg btn-danger" id="cancel">
            Cancelar <i class="fas fa-fw fa-times"></i>
          </button>
          <button type="button" name="button" class="btn btn-lg btn-info" id="add">
            Agregar <i class="fas fa-fw fa-angle-right"></i>
          </button>
          <hr class="mb-4">

          <div class="heading heading-sm text-uppercase border-bottom">
            Crear persona
          </div>

          <form>
            <div class="card mb-3">
              <div class="card-body">

                <div class="form-group">
                  <label for="">Nombre y Apellido <span class="text-danger">(*)</span></label>
                  <input type="text" name="" id="name" value="" class="form-control">
                </div>

                <div class="form-group">
                  <label for="">DNI <span class="text-danger">(*)</span></label>
                  <input type="text" name="" id="dni" value="" class="form-control">
                </div>

                <div class="form-group">
                  <label for="">Email <span class="text-danger">(*)</span></label>
                  <input type="text" name="" id="email" value="" class="form-control">
                </div>

                <div class="form-group">
                  <label for="">Fecha Nacimiento <span class="text-danger">(*)</span></label>
                  <input type="date" name="" id="date" value="" class="form-control">
                </div>

              </div>
            </div>

            <div class="text-muted mb-4">
              <span class="text-danger">(*)</span> Campos obligatorios
            </div>

            <button type="button" onclick="validateForm();" name="button" class="btn btn-lg btn-info mb-3" id="create">
              Crear y Agregar <i class="fas fa-fw fa-angle-right"></i>
            </button>
          </form>

        </div>
        <div class="col-12 col-md-8">

          <div class="heading heading-sm text-uppercase border-bottom">
            Lista de invitados
          </div>

          <div class="media border border-info mb-4">
            <div class="bg-info text-white p-4 mr-3">
              <i class="fas fa-fw fa-5x fa-glass-martini-alt"></i>
            </div>
            <div class="media-body py-2">
              <div class="row">
                <div class="col-8">
                  <div class="">09/06/2018 | RODRIGO DP & KNOWBRUo</div>
                  <h3 class="text-uppercase my-0 py-2 text-info ">Lista de Previas</h3>
                  <h5 class="font-weight-bold text-uppercase ">Owner de la lista</h5>
                </div>
                <div class="col-4 text-right pr-4">
                  <div class="countdown">
                    Cierre de lista!
                    <h5 id="clock"></h5>
                  </div>
                  <div class="">
                    Invitados
                    <h5>150/200</h5>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <table id="datatable" class="table table-striped table-bordered" style="width:100%">
            <thead>
              <tr>
                <th>DNI</th>
                <th>Invitado</th>
                <th>Usuario</th>
                <th>Ac</th>
              </tr>
            </thead>
            <tbody>
              {% for i in range(1, 151) %}
              <tr>
                <td>{{ i }}12345678</td>
                <td>invitado{{ i }}</td>
                <td>usuario{{ i }}</td>
                <td>
                  <a href="#">
                    <i class="fas fa-fw fa-lg fa-times text-danger"></i>
                  </a></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>

          <hr>

          <div>
            <button type="button" name="button" class="btn btn-lg btn-info" id="btn-close-list">
              Cerrar lista
            </button>
            <a href="list-print.html" class="btn btn-lg btn-light float-right" id="btn-print-list">Imprimir Lista</a>
          </div>

        </div>
      </div>
    </section>

  </div>
</div>
{% endblock %}

{% block js %}
<script type="text/javascript">

  function validateForm(){

    var name = document.getElementById('name').value.trim();
    var dni = document.getElementById('dni').value.trim();
    var email = document.getElementById('email').value.trim();
    var date = document.getElementById('date').value.trim();

    if (name === '' || dni === '' || email === '' || date === ''){
      swal(
        'Oops´...',
        'Faltan completar campos obligatorios!',
        'error'    );
      return false;
    }else{
      $('#invitado').hide();
      swal({
        title: "Buen trabajo!",
        text: "Su registro fue creado con éxito!",
        icon: "success",
        buttons: "Cerrar!"
      });
      $('.form-control').val('');
      $('#invitado').show();
      // $('#invitado').delay(4000).fadeOut();
    }
  }

  $("#spinner").hide();
  $("#people").hide();
  $('#invitado').hide();
  $('#cancel').hide();

  $("#cancel").click(function(){
    $("#people").hide();
    $('#cancel').hide();
  });

  $("#delete").click(function(){
    $("#invitado").hide();
  });

  $("#search").click(function(){
    $('.form-control').val('');
    $("#people").hide();
    // $('#invitado').hide();
    $("#spinner").show();
    $("#spinner").delay("fast").hide(100);
    $("#people").delay("fast").show(200);
    $('#cancel').delay("fast").show(200);
  });

  $("#add").click(function(){
    swal({
      title: "Buen trabajo!",
      text: "La persona fue agregada a la lista de invitados!",
      icon: "success",
      buttons: "Cerrar!"
    });
    $('.form-control').val('');
    $('#cancel').hide();
    $("#people").hide();
    $('#invitado').show();
    // $('#invitado').delay(4000).fadeOut();
  });


  // datatables
  $(document).ready(function() {
    $('#datatable').DataTable({
      "order": [[ 2, "asc" ]],
      "lengthMenu": [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]],
      "language": {
          "lengthMenu": "Mostrar _MENU_ registros por página",
          "search": "Buscar:",
          "zeroRecords":    "No se encontraron registros coincidentes",
          "info": "Mostrando pagina _PAGE_ de _PAGES_",
          "infoEmpty": "No hay registros disponibles",
          "infoFiltered": "(filtrado de _MAX_ registros totales)",
      "paginate": {
          "first":      "Primera",
          "last":       "Ultima",
          "next":       "Proxima",
          "previous":   "Anterior"
      },

      }
    });


    // countdown
    $('#btn-print-list').addClass('disabled');

    // temporal para obtener la fecha y hora actual y agregarle un minuto mas para testaer
    var tiempo = new Date();
    var date = tiempo.getDate();
    var month = tiempo.getMonth()+1;
    var year = tiempo.getFullYear();
    var hora = tiempo.getHours();
    var minuto = tiempo.getMinutes()+1;
    var segundo = tiempo.getSeconds();

    var fecha = year + '/' + month + '/' + date;
    var tiempo = hora + ':' + minuto + ':' + segundo;

    var limite = fecha + ' ' + tiempo;
    // fin temporal

    $('#clock').countdown(limite) // pasar fecha y hora de cierre de la lista
    .on('update.countdown', function(event) {
      var format = '%H:%M:%S';
      if(event.offset.totalDays > 0) {
        format = '%-d dia%!d ' + format;
      }
      if(event.offset.weeks > 0) {
        format = '%-w semana%!w ' + format;
      }
      $(this).html(event.strftime(format));
    })
    .on('finish.countdown', function(event) {
      $(this).html('<span class="text-danger">Lista cerrada!</span>')
        .parent().addClass('disabled');
      $('#btn-close-list').addClass('disabled');
      $('#btn-close-list').addClass('disabled');
      $('#btn-close-list').addClass('disabled');
      $('#btn-close-list').removeClass('btn-info');
      $('#btn-close-list').addClass('btn-light');

      $('#btn-print-list').removeClass('disabled');
      $('#btn-print-list').removeClass('btn-light');
      $('#btn-print-list').addClass('btn-info');
    });

} );
{# </script> #}
